# Enterprise QuickSight Backup Configuration
# This configuration is for large-scale enterprise environments with multiple regions and compliance requirements

# AWS Configuration
aws:
  region: us-east-1                    # Region for QuickSight assets
  identity_region: us-east-1           # Region for QuickSight users and groups
  account_id: "123456789012"

# DynamoDB Configuration with enterprise naming conventions
dynamodb:
  users_table_name: "enterprise-quicksight-users-backup-prod"
  groups_table_name: "enterprise-quicksight-groups-backup-prod"

# S3 Configuration with enterprise bucket structure
s3:
  bucket_name: "enterprise-quicksight-backups-compliance"
  prefix_format: "YYYY/MM/DD"

# Backup Options - Enterprise settings
backup:
  include_dependencies: true
  include_permissions: true
  include_tags: true
  export_format: "QUICKSIGHT_JSON"
  max_assets_per_bundle: 25            # Smaller bundles for enterprise environments to optimize performance

# Enterprise logging configuration
logging:
  level: "INFO"
  file_path: "/opt/quicksight-backup/logs/enterprise-backup.log"

# Enterprise Deployment Notes:
# 
# 1. COMPLIANCE REQUIREMENTS:
#    - Enable S3 bucket encryption with KMS
#    - Enable S3 bucket versioning and MFA delete
#    - Configure S3 lifecycle policies for long-term retention
#    - Enable CloudTrail logging for all API calls
#    - Set up DynamoDB point-in-time recovery
#
# 2. SECURITY CONSIDERATIONS:
#    - Use IAM roles with least privilege principle
#    - Enable VPC endpoints for S3 and DynamoDB access
#    - Configure S3 bucket policies to restrict access
#    - Use AWS Secrets Manager for sensitive configuration
#    - Enable GuardDuty for threat detection
#
# 3. MONITORING AND ALERTING:
#    - Set up CloudWatch alarms for backup failures
#    - Configure SNS notifications for critical errors
#    - Monitor DynamoDB and S3 costs and usage
#    - Set up dashboard for backup success rates
#    - Configure log aggregation with CloudWatch Logs
#
# 4. DISASTER RECOVERY:
#    - Configure cross-region replication for S3 bucket
#    - Set up DynamoDB global tables for multi-region
#    - Document recovery procedures and test regularly
#    - Maintain backup retention policies per compliance
#
# 5. AUTOMATION:
#    - Schedule backups using AWS EventBridge/CloudWatch Events
#    - Use AWS Lambda for serverless execution
#    - Implement backup validation and integrity checks
#    - Set up automated cleanup of old backups
#
# 6. PERFORMANCE OPTIMIZATION:
#    - Use DynamoDB on-demand billing for variable workloads
#    - Configure S3 Transfer Acceleration for large files
#    - Implement parallel processing for large environments
#    - Monitor and optimize API rate limits
#
# Example IAM Policy for Enterprise Deployment:
# {
#   "Version": "2012-10-17",
#   "Statement": [
#     {
#       "Effect": "Allow",
#       "Action": [
#         "quicksight:List*",
#         "quicksight:Describe*",
#         "quicksight:StartAssetBundleExportJob"
#       ],
#       "Resource": "*",
#       "Condition": {
#         "StringEquals": {
#           "aws:RequestedRegion": "us-east-1"
#         }
#       }
#     },
#     {
#       "Effect": "Allow",
#       "Action": [
#         "dynamodb:CreateTable",
#         "dynamodb:PutItem",
#         "dynamodb:BatchWriteItem"
#       ],
#       "Resource": [
#         "arn:aws:dynamodb:us-east-1:123456789012:table/enterprise-quicksight-*-backup-prod"
#       ]
#     },
#     {
#       "Effect": "Allow",
#       "Action": [
#         "s3:PutObject",
#         "s3:PutObjectAcl"
#       ],
#       "Resource": "arn:aws:s3:::enterprise-quicksight-backups-compliance/*",
#       "Condition": {
#         "StringEquals": {
#           "s3:x-amz-server-side-encryption": "aws:kms"
#         }
#       }
#     }
#   ]
# }